<nav data-fold="false" class="nav">
    <div class="container">
        <h1 class="nav-logo">
            <a>
                <img alt="로고">
            </a>
        </h1>
        <button class="button button--regular icon-button"
            id="nav-fold-button">
            <img class="icon nav-item__icon" src="../icon/menu-line.svg"></img>
        </button>
    </div>
    <button type="button"
        class="button button--primary button--regular">
        계약 시작하기
    </button>
    <ul class="nav-list">
        <li data-nav="dashboard">
            <a href="../index.html" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/home-line.svg"></img>
                <span class="body--small">홈</span>
            </a>
        </li>
        <li data-nav="document-list">
            <a href="../document-list.html" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/document-line.svg"></img>
                <span class="body--small">문서</span>
            </a>
        </li>
        <li data-nav="template">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/form-line.svg"></img>
                <span class="body--small">템플릿</span>
            </a>
        </li>
        <li data-nav="other-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/archive-line.svg"></img>
                <span class="body--small">외부문서</span>
            </a>
        </li>
        <li data-nav="burk-submit">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/home-line.svg"></img>
                <span class="body--small">대량발송</span>
            </a>
        </li>
        <li data-nav="link-sign">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/link-line.svg"></img>
                <span class="body--small">링크서명</span>
            </a>
        </li>
        <li data-nav="office-submit">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/briefcase-line.svg"></img>
                <span class="body--small">공문발송</span>
            </a>
        </li>
        <li data-nav="edit-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/edit-line.svg"></img>
                <span class="body--small">문서편집</span>
            </a>
        </li>
        <li data-nav="signature">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/digital-signature-line.svg"></img>
                <span class="body--small">사인/도장</span>
            </a>
        </li>
        <li data-nav="create-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/text-line.svg"></img>
                <span class="body--small">문서작성</span>
            </a>
        </li>
        <li data-nav="search-template">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/search-line.svg"></img>
                <span class="body--small">서식검색</span>
            </a>
        </li>
        <li data-nav="trash">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/trash-line.svg"></img>
                <span class="body--small">휴지통</span>
            </a>
        </li>
        <li data-anv="calendar">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/calendar-line.svg"></img>
                <span class="body--small">캘린더</span>
            </a>
        </li>
        <li data-nav="setting">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/settings-line.svg"></img>
                <span class="body--small">설정</span>
            </a>
        </li>
        <li data-nav="api">
            <a href="javascript:void(0) " class="nav-item">
                <img class="icon nav-item__icon" src="../icon/code-line.svg"></img>
                <span class="body--small">API 연동</span>
            </a>
        </li>
        <li data-nav="support">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/bubble-exclamation-line.svg"></img>
                <span class="body--small">고객센터</span>
            </a>
        </li>
        <li data-nav="logout">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="../icon/sign-out-line.svg"></img>
                <span class="body--small">로그아웃</span>
            </a>
        </li>
        <li data-nav="toggle-theme">
            <a href="javascript:void(0)" class="nav-item" id="toggle-theme">
                <img class="icon nav-item__icon" src="../icon/home-line.svg"></img>
                <span class="body--small">다크모드</span>
            </a>
        </li>
    </ul>
</nav>
<script>

    $(function(){
        setNavAttr()
    })

    function setNavAttr(){
        const viewportWidth = $(window).width()
        viewportWidth < 480 ? $('.nav').attr('data-fold',true) : $('.nav').attr('data-fold',false)
    }

    // nav fold event
    $('#nav-fold-button').on('click',manageNavContainer)

    function manageNavContainer(){
        let foldedNav = $('.nav').attr('data-fold')
        console.log(foldedNav)

        if(foldedNav=='false'){
            $('.nav').attr('data-fold',true)
            $('.main').css({
                'padding-left':'3rem'
            })
            
        }
        else{
            $('.nav').attr('data-fold',false)
            $('.main').css({
                'padding-left':'12rem'
            })
        }
    }


    $(function(){
        setTheme()
        setNavActive()
    })
    function setTheme(){
        let loadedTheme =localStorage.getItem('data-theme')
        switch(loadedTheme){
            case undefined || null:
                console.log('ehere')
                $('html').attr('data-theme','light')
                break;
            case 'light':
                $('html').attr('data-theme','light')
                break;
            case 'dark':
                $('html').attr('data-theme','dark')
                break;
        }
    }

    function toggleTheme(){
        loadedTheme =  localStorage.getItem('data-theme');
        switch(loadedTheme){
            case undefined || null:
                currentTheme = 'dark';
                break;
            case 'light':
                currentTheme = 'dark';
                break;
            case 'dark':
                currentTheme = 'light';
                break;
        }

        localStorage.setItem('data-theme',currentTheme)
        $('html').attr('data-theme',currentTheme)
    }

    $('#toggle-theme').on('click',toggleTheme)

    function setNavActive(){
        const url = $(location).attr('href')
        const currentFileName = url.split('/').pop().replace('.html','')

        if(currentFileName == 'index'){
            $(`.nav li[data-nav=dashboard] a`).addClass('is-active')
        }
        else{
            $(`.nav li[data-nav=${currentFileName}] a`).addClass('is-active')
        }

    }
    

</script>
