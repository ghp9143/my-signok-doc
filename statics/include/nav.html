<nav data-fold="false" class="nav">
    <div class="nav__top">
        <button class="button is-medium icon-button"
            id="nav-fold-button">
            <img class="icon nav-item__icon" src="/statics/icon/menu-line.svg"></img>
        </button>
        <h1 class="nav__logo is-unfold">
            <a>
                <img alt="로고">
            </a>
        </h1>
    </div>
    <div class="nav__middle is-unfold">
        <button type="button"
            class="button button--primary is-medium">
            계약 시작하기
        </button>
        <p class="flex--row flex-justify--between">계약 시작 가능<span>0</span></p>
    </div>
    <ul class="nav__list">
        <li data-nav="dashboard">
            <a href="/index.html" class="nav-item is-border">
                <img class="icon nav-item__icon" src="/statics/icon/home-line.svg"></img>
                <span class="nav__name is-unfold">홈</span>
            </a>
        </li>

        <li class="nav__category is-unfold">
            <p class="">계약관리</p>
        </li>

        <li data-nav="contract-list">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/document-line.svg"></img>
                <span class="nav__name is-unfold">내 계약 현황</span>
            </a>
        </li>
        <li data-nav="document-list">
            <a href="/document-list.html" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/document-line.svg"></img>
                <span class="nav__name is-unfold">통합문서함</span>
            </a>
        </li>
        <li data-nav="template">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/form-line.svg"></img>
                <span class="nav__name is-unfold">템플릿 관리</span>
            </a>
        </li>
        <li data-nav="create-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/text-line.svg"></img>
                <span class="nav__name is-unfold">서식관리</span>
            </a>
        </li>
        <li data-nav="other-document">
            <a href="javascript:void(0)" class="nav-item is-border">
                <img class="icon nav-item__icon" src="/statics/icon/archive-line.svg"></img>
                <span class="nav__name is-unfold">외부계약서</span>
            </a>
        </li>

        <li class="nav__category is-unfold">
            <p class="">서명 및 발송</p>
        </li>
        
        <li data-nav="signature">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/digital-signature-line.svg"></img>
                <span class="nav__name is-unfold">사인/도장</span>
            </a>
        </li>
        <li data-nav="burk-submit">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/home-line.svg"></img>
                <span class="nav__name is-unfold">대량발송</span>
            </a>
        </li>
        <li data-nav="link-sign">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/link-line.svg"></img>
                <span class="nav__name is-unfold">링크서명</span>
            </a>
        </li>
        <li data-nav="office-submit">
            <a href="javascript:void(0)" class="nav-item is-border">
                <img class="icon nav-item__icon" src="/statics/icon/briefcase-line.svg"></img>
                <span class="nav__name is-unfold">공문발송</span>
            </a>
        </li>

        <li data-nav="group">
            <a href="/template/group/company-info.html" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/trash-line.svg"></img>
                <span class="nav__name is-unfold">조직관리</span>
            </a>
        </li>
        <li data-nav="trash">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/trash-line.svg"></img>
                <span class="nav__name is-unfold">휴지통</span>
            </a>
        </li>
        <li data-anv="calendar">
            <a href="javascript:void(0)" class="nav-item is-border">
                <img class="icon nav-item__icon" src="/statics/icon/calendar-line.svg"></img>
                <span class="nav__name is-unfold">캘린더</span>
            </a>
        </li>

        <li class="nav__category is-unfold">
            <p class="">설정</p>
        </li>

        <li data-nav="create-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/text-line.svg"></img>
                <span class="nav__name is-unfold">회원정보</span>
            </a>
        </li>
        <li data-nav="setting">
            <a href="/template/setting/user-set.html" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/settings-line.svg"></img>
                <span class="nav__name is-unfold">메뉴설정</span>
            </a>
        </li>
        <li data-nav="api">
            <a href="javascript:void(0) " class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/code-line.svg"></img>
                <span class="nav__name is-unfold">API 연동</span>
            </a>
        </li>
        
        

        <!-- <li data-nav="other-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/archive-line.svg"></img>
                <span class="nav__name is-unfold">외부문서</span>
            </a>
        </li>
        
        
        <li data-nav="edit-document">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/edit-line.svg"></img>
                <span class="nav__name is-unfold">문서편집</span>
            </a>
        </li> -->
        
        
        <!-- <li data-nav="support">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/bubble-exclamation-line.svg"></img>
                <span class="nav__name is-unfold">고객센터</span>
            </a>
        </li> -->
        <!-- <li data-nav="logout">
            <a href="javascript:void(0)" class="nav-item">
                <img class="icon nav-item__icon" src="/statics/icon/sign-out-line.svg"></img>
                <span class="nav__name is-unfold">로그아웃</span>
            </a>
        </li>
        <li data-nav="toggle-theme">
            <a href="javascript:void(0)" class="nav-item" id="toggle-theme">
                <img class="icon nav-item__icon" src="/statics/icon/sun-line.svg"></img>
                <span class="nav__name is-unfold">라이트모드</span>
            </a>
        </li> -->
    </ul>
</nav>
<script>

    let navState = localStorage.getItem('data-fold')
    $(function(){
        setNavAttr(navState)
    })

    // nav fold set
    function setNavAttr(){
        navState == null || navState == "false" ? localStorage.setItem('data-fold',"false") : localStorage.setItem('data-fold',"true");

        const viewportWidth = $(window).width()
        viewportWidth < 1280 ? $('.nav').attr('data-fold',true) : $('.nav').attr('data-fold',false)

        if(navState=='false'){
            $('.nav').attr('data-fold',false)
        }
        else{
            $('.nav').attr('data-fold',true)
        }
    }

    // nav fold event
    $('#nav-fold-button').on('click',manageNavContainer)

    // main 수정
    function manageNavContainer(){
        navState = localStorage.getItem('data-fold')
        navState == 'false' ? currentNavState = "true" : currentNavState = "false";

        if(navState=='false'){
            $('.nav').attr('data-fold',true)
        }
        else{
            $('.nav').attr('data-fold',false)
        }

        localStorage.setItem('data-fold',currentNavState)
    }

    

    // Theme Setting
    let loadedTheme = localStorage.getItem('data-theme')
    let currentTheme={
        'data-theme':'light',
        'icon':'sun',
        'content':'라이트모드'
    }

    $(function(){
        setTheme(loadedTheme)
        setNavActive()

    })

    function setTheme(setTheme){
        switch(setTheme){
            case undefined || null || 'light':
                currentTheme['data-theme'] = 'light';
                currentTheme['icon'] = 'sun'
                currentTheme['content'] = '라이트모드'
                break;

            case 'dark':
                currentTheme['data-theme'] = 'dark';
                currentTheme['icon'] = 'moon'
                currentTheme['content'] = '다크모드'
                break;
        }

        $('#toggle-theme span').text(currentTheme['content'])
        $('#toggle-theme').find('img').attr('src',`/statics/icon/${currentTheme['icon']}-line.svg`)
        localStorage.setItem('data-theme',setTheme);

        $('html').attr('data-theme',currentTheme['data-theme'])
    }

    function toggleTheme(){
        loadedTheme =  localStorage.getItem('data-theme');
        setTheme(loadedTheme == "dark" ? "light" : "dark");
    }

    $('#toggle-theme').on('click',toggleTheme)


    // Nav Setting
    function setNavActive(){
        const currentFolder = $(location).attr('href').split('/')
        if(currentFolder.length > 4){
            currentFileName = currentFolder[4].split('.')[0]
        }
        else{
            currentFileName = currentFolder.pop().split('.')[0]
        }

        if(currentFileName == 'index'){
            $(`.nav li[data-nav=dashboard] a`).addClass('is-active')
        }
        else{
            $(`.nav li[data-nav=${currentFileName}] a`).addClass('is-active')
        }

    }

    
    

</script>
