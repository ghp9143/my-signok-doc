<!DOCTYPE html>
<html lang="ko">
    <head>
        <script src="/statics/js/loadHTML.js"></script>
        <script>
            loadHTML("/statics/include/head.html");
        </script>
        <title>회원가입</title>
    </head>

    <body>
        <main class="main main--background">
            <!-- // 상단헤더 -->
            <div class="container flex--column flex-justify--between">
                <div class="content-wrap flex--column gap--xl">
                    <div class="title-box">
                        <h1 class="">
                            <a>
                                <img src="" alt="로고">
                            </a>
                        </h1>
                        <ul class="bar">
                            <li class="bar__item is-active"></li>
                            <li class="bar__item is-active"></li>
                            <li class="bar__item is-active"></li>
                        </ul>
    
                        <div class="title-box__title">
                            <p class="body--large font-weight--medium">싸인오케이에서 사용할<br>비밀번호를 입력해주세요</p>
                        </div>
                    </div>
                    
                    <div class="box__content">
                        <form class="form">
                            <div class="input-area">
                                <label for="login-password" class="input-box__label">비밀번호</label>
                                <div class="input-box">
                                    <input type="password"
                                    class="input"
                                    id="signup-password"
                                    placeholder="비밀번호를 입력해주세요.">
                                    <img class="icon" src="/icon/eye-show-line.svg"></img>
                                </div>
                                <p class="input-area__helper">비밀번호는 8~32자리의 영문 대소문자, 숫자, 특수문자를 조합하여 설정해 주세요.</p>
                            </div>
                            <div class="input-area">
                                <label for="login-password" class="input-box__label">비밀번호 확인</label>
                                <div class="input-box">
                                    <input type="password"
                                class="input"
                                id="signup-password-re"
                                placeholder="비밀번호를 입력해주세요.">
                                    <img class="icon" src="/icon/eye-show-line.svg"></img>
                                </div>
                                <p class="input-area__helper is-hide">비밀번호가 일치하지 않습니다.</p>
                            </div>
                        </form>
                    </div>
                    <!-- // box -->
                </div>
                <!-- //area -->
                <div class="flex--row flex-justify--between flex-align--center">
                    <a href="/step-2.html" class="button button--text button--small">이전</a>
                    <a href="" class="button button--primary button--small">다음</a>
                </div>
                
            </div>
           <!-- // container -->
        </main>
       
        
        <script>

            /** 유효성검사 */
            function checkInputValue(){
                const pwdReg= /^(?=.*[a-zA-Z])((?=.*\d)(?=.*\W)).{8,32}$/
                const currentInput = $(this).attr('id');
                const value = $(this).val()

                // 비밀번호 입력
                if(currentInput.indexOf('re') < 1){
                    if(value.length < 1){
                        $(this).parents('.input-area').addClass('is-error')
                    }
                    else if(!pwdReg.test(value)){
                        $(this).parents('.input-area').addClass('is-error')
                    }
                    else{
                        $(this).parents('.input-area').removeClass('is-error')
                    }
                }
                // 비밀번호 확인 입력
                else{
                    if(value.length < 1) {
                        $(this).parents('.input-area').addClass('is-error')
                    }
                    else if($('#signup-password-re').val() !== $('#signup-password').val()){
                        $(this).parents('.input-area').addClass('is-error')
                        $(this).parent().next('.input-area__helper').removeClass('is-hide')
                    }
                    else{
                        $(this).parents('.input-area').removeClass('is-error')
                        $(this).parent().next('.input-area__helper').addClass('is-hide')
                    }
                }
            }

            $('.input').on('keyup',checkInputValue)


            /** remove 아이콘 클릭시 input 값 초기화
             * 아이콘에 'eye'가 있을 경우 비밀번호 토글
             * 아이콘에 'eye'가 없을 경우 input 초기화
             */
            function handlingInputValue(){

                if($(this).attr('src').indexOf('eye') > -1){
                    const inputType = $(this).prev('.input')

                    if(inputType.attr('type') == 'password'){
                        inputType.attr('type','text');
                        $(this).attr('src',"/icon/eye-hide-line.svg")
                    }

                    else{
                        inputType.attr('type','password');
                        $(this).attr('src',"/icon/eye-show-line.svg")
                    }
                }
                
                else{
                    $(this).prev('.input').val('')
                    $(this).hide()
                }
                
            }

            $('.icon').on('click',handlingInputValue)

            function submitInput(e){
                e.preventDefault()

                for(let i = 0; i < $('.input').length; i++){
                    if($('.input').eq(i).val().length <= 0 ){
                        alert('비밀번호를 입력해주세요.')
                        return false;
                    }
                }

                if( $('.input-area.is-error').length > 0 ){
                    alert('비밀번호를 바르게 입력해주세요.')
                    return false;
                }
                else{
                    console.log('pass')
                }
            }

            $('.button--primary').on('click',submitInput)

        </script>
    </body>
    
</html>